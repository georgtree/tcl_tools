<!DOCTYPE html><html><head><meta charset="utf-8"/>
<title>Collection of Tcl tools</title>
<link rel='stylesheet' type='text/css' href='assets/ruff-min.css' />
<script type='text/javascript' src='assets/ruff-min.js'></script>
</head>
<body>
<div class='ruff-layout'>
<header class='ruff-layout-header ruff-hd'>
<a style='text-decoration:none;' href='index.html'>Collection of Tcl tools (v0.1)</a>


            <div id="ruffButtonBar">
            <button id="ruffNavMove" onclick="ruffMoveNavPane()"></button>
            <button id="ruffToggleTheme" onclick="ruffNextTheme()"></button>
            </div>
        </header><main class='ruff-layout-main ruff-bd'><h1 class='ruff'><a name='::gnuplotutil'></a>::gnuplotutil<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='index.html'>Main</a>, <a href='index-docindex.html#'>Index</a></span></h1>
<div style='clear:both;'></div>
<h2 class='ruff'><a name='::gnuplotutil-Commands'></a>Commands<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='index.html'>Main</a>, <a href='index-docindex.html#'>Index</a></span></h2>
<div style='clear:both;'></div>
<h3 class='ruffproc'><a name='::gnuplotutil::plotXNYN'>plotXNYN</a><span class='ns_scope'> [<a href="index-gnuplotutil.html#::gnuplotutil" title="::gnuplotutil" class='ruff_cmd'>::gnuplotutil</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='index.html'>Main</a>, <a href='index-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Creates input and command files to plot 2D graphs with the individual x points, and send it to gnuplot.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>plotXNYN</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code><font color=#463e11>-columns</font></code></td><td>Argument that provides the x and y data to plot, the number of columns is not restricted and must be provided at the end of command after all switches.</td></tr>
<tr><td><code><font color=#463e11>-delete</font></code></td><td>Boolean switch that enables deleting of temporary file after end of plotting, default off.</td></tr>
<tr><td><code><font color=#463e11>-grid</font></code></td><td>Boolean switch that enables display of grid, default off.</td></tr>
<tr><td><code><font color=#463e11>-names</font></code></td><td>Argument that enable setting the column names of provided data, value must be provided as list in the same order as data columns provided, must have the length 1+number of y data colums.</td></tr>
<tr><td><code><font color=#463e11>-optcmd</font></code></td><td>Argument with optional string that may contain additional commands to gnuplot.</td></tr>
<tr><td><code><font color=#463e11>-xlabel</font></code></td><td>Argument to set x-axis label to display, string must be provided after it.</td></tr>
<tr><td><code><font color=#463e11>-xlog</font></code></td><td>Arg xlog boolean switch of log scale of x axis, default off.</td></tr>
<tr><td><code><font color=#463e11>-ylabel</font></code></td><td>Argument to set y-axis label to display, string must be provided after it.</td></tr>
<tr><td><code><font color=#463e11>-ylog</font></code></td><td>Boolean switch of log scale of y axis, default off.</td></tr>
</table>
<h5 class='ruff'>Description</h5>
<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>Example:
<b><font color=#923B23>set</font></b> x1 [<b><font color=#923B23>list</font></b> 0 1 2 3 4 5 6]
<b><font color=#923B23>set</font></b> y1 [<b><font color=#923B23>list</font></b> 0 1 4 9 16 25 36]
<b><font color=#923B23>set</font></b> x2 [<b><font color=#923B23>list</font></b> 0 1 2 3 4 5 6 7]
<b><font color=#923B23>set</font></b> y2 [<b><font color=#923B23>list</font></b> 0 1 8 27 64 125 216 350]
<b><font color=#923B23>set</font></b> x3 [<b><font color=#923B23>list</font></b> 0 1 2 3 4 5 6 7]
<b><font color=#923B23>set</font></b> y3 [<b><font color=#923B23>list</font></b> 0 -1 -8 -27 -64 -125 -216 -350]
<b><font color=#923B23>set</font></b> x4 [<b><font color=#923B23>list</font></b> 0 1 2 3 4 5 6 7]
<b><font color=#923B23>set</font></b> y4 [<b><font color=#923B23>list</font></b> 0 -1 -8 -27 -64 -125 -216 -350]
gnuplotutil::plotXNYN <font color=#463e11>-xlabel</font> <font color=#035103>&quot;x label&quot;</font> <font color=#463e11>-ylabel</font> <font color=#035103>&quot;y label&quot;</font> <font color=#463e11>-grid</font> <font color=#463e11>-names</font> [<b><font color=#923B23>list</font></b> y1 y2 y3 y4] <font color=#463e11>-columns</font> <font color=#4A181B>$x1</font> <font color=#4A181B>$y1</font> <font color=#4A181B>$x2</font> <font color=#4A181B>$y2</font> <font color=#4A181B>$x3</font> <font color=#4A181B>$y3</font> <font color=#4A181B>$x4</font> <font color=#4A181B>$y4</font>
</pre>

</figure><h5 class='ruff'>Return value</h5><p class='ruff'>Returns gnuplot window with plotted data</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_1' href="javascript:toggleSource('1')">Show source</a></p>
<div id='1' class='ruff_dyn_src'><pre><b><font color=#ca14ca>proc</font></b> ::gnuplotutil::plotXNYN {args} {

    <i><font color=#4b5d50># Creates input and command files to plot 2D graphs with the individual x points, and send it to gnuplot.</font></i>
    <i><font color=#4b5d50>#  -xlog - arg xlog boolean switch of log scale of x axis, default off</font></i>
    <i><font color=#4b5d50>#  -ylog - boolean switch of log scale of y axis, default off</font></i>
    <i><font color=#4b5d50>#  -delete - boolean switch that enables deleting of temporary file after end of plotting, default off</font></i>
    <i><font color=#4b5d50>#  -xlabel - argument to set x-axis label to display, string must be provided after it</font></i>
    <i><font color=#4b5d50>#  -ylabel - argument to set y-axis label to display, string must be provided after it</font></i>
    <i><font color=#4b5d50>#  -optcmd - argument with optional string that may contain additional commands to gnuplot</font></i>
    <i><font color=#4b5d50>#  -grid - boolean switch that enables display of grid, default off</font></i>
    <i><font color=#4b5d50>#  -names - argument that enable setting the column names of provided data, value must be provided as list</font></i>
    <i><font color=#4b5d50>#    in the same order as data columns provided, must have the length 1+number of y data colums</font></i>
    <i><font color=#4b5d50>#  -columns -  argument that provides the x and y data to plot, the number of columns is not restricted and must be provided</font></i>
    <i><font color=#4b5d50>#    at the end of command after all switches</font></i>
    <i><font color=#4b5d50># Returns gnuplot window with plotted data</font></i>
    <i><font color=#4b5d50># ```</font></i>
    <i><font color=#4b5d50># Example:</font></i>
    <i><font color=#4b5d50># set x1 [list 0 1 2 3 4 5 6]</font></i>
    <i><font color=#4b5d50># set y1 [list 0 1 4 9 16 25 36]</font></i>
    <i><font color=#4b5d50># set x2 [list 0 1 2 3 4 5 6 7]</font></i>
    <i><font color=#4b5d50># set y2 [list 0 1 8 27 64 125 216 350]</font></i>
    <i><font color=#4b5d50># set x3 [list 0 1 2 3 4 5 6 7]</font></i>
    <i><font color=#4b5d50># set y3 [list 0 -1 -8 -27 -64 -125 -216 -350]</font></i>
    <i><font color=#4b5d50># set x4 [list 0 1 2 3 4 5 6 7]</font></i>
    <i><font color=#4b5d50># set y4 [list 0 -1 -8 -27 -64 -125 -216 -350]</font></i>
    <i><font color=#4b5d50># gnuplotutil::plotXNYN -xlabel &quot;x label&quot; -ylabel &quot;y label&quot; -grid -names [list y1 y2 y3 y4] -columns $x1 $y1 $x2 $y2 $x3 $y3 $x4 $y4</font></i>
    <i><font color=#4b5d50># ```</font></i>
    <b><font color=#923B23>set</font></b> arguments [argparse <font color=#463e11>-inline</font> {
        {<font color=#463e11>-xlog</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-ylog</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-delete</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-xlabel</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-ylabel</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-optcmd</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-grid</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-names</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-columns</font> <font color=#463e11>-catchall</font>}
    }]
    <b><font color=#923B23>set</font></b> xscaleStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> yscaleStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> xlabelStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> ylabelStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> gridStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> autoTitleStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> optcmdStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> xlog]==1} {
        <b><font color=#923B23>set</font></b> xscaleStr <font color=#035103>&quot;set logscale x&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> ylog]==1} {
        <b><font color=#923B23>set</font></b> yscaleStr <font color=#035103>&quot;set logscale y&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> grid]==1} {
        <b><font color=#923B23>set</font></b> gridStr <font color=#035103>&quot;set grid&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> names]==1} {
        <b><font color=#923B23>set</font></b> columnNames [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> names]
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> xlabel]==1} {
        <b><font color=#923B23>set</font></b> xlabelStr <font color=#035103>&quot;set xlabel '<font color=#4A181B>[</font>dict get <font color=#4A181B>$</font>arguments xlabel<font color=#4A181B>]</font>'&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> ylabel]==1} {
        <b><font color=#923B23>set</font></b> ylabelStr <font color=#035103>&quot;set ylabel '<font color=#4A181B>[</font>dict get <font color=#4A181B>$</font>arguments ylabel<font color=#4A181B>]</font>'&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> optcmd]==1} {
        <b><font color=#923B23>set</font></b> optcmdStr [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> optcmd]
    }
    <b><font color=#923B23>set</font></b> columnsNum [<b><font color=#923B23>llength</font></b> [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> columns]]
    <b><font color=#923B23>if</font></b> {<font color=#4A181B>$columnsNum</font> % 2 != 0} {
        <b><font color=#923B23>error</font></b> <font color=#035103>&quot;Number of data columns <font color=#4A181B>$</font>columnsNum is odd&quot;</font>
    }
    <b><font color=#923B23>set</font></b> dataNum [<b><font color=#923B23>expr</font></b> {int(<font color=#4A181B>$columnsNum</font>/2)}]
    <b><font color=#923B23>set</font></b> yColumnCount 0
    <b><font color=#923B23>for</font></b> {<b><font color=#923B23>set</font></b> i 0} {<font color=#4A181B>$i</font>&lt;<font color=#4A181B>$dataNum</font>} {<b><font color=#923B23>incr</font></b> i} {
        <b><font color=#923B23>set</font></b> xLen [<b><font color=#923B23>llength</font></b> [<b><font color=#923B23>lindex</font></b> [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> columns] [<b><font color=#923B23>expr</font></b> {int(<font color=#4A181B>$i</font>*2)}]]]
        <b><font color=#923B23>set</font></b> yLen [<b><font color=#923B23>llength</font></b> [<b><font color=#923B23>lindex</font></b> [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> columns] [<b><font color=#923B23>expr</font></b> {int(<font color=#4A181B>$i</font>*2+1)}]]]
        <b><font color=#923B23>lappend</font></b> xLengths <font color=#4A181B>$xLen</font>
        <b><font color=#923B23>if</font></b> {<font color=#4A181B>$xLen</font> != <font color=#4A181B>$yLen</font>} {
            <b><font color=#923B23>error</font></b> <font color=#035103>&quot;Number of points of y-axis data (column <font color=#4A181B>[</font>expr <font color=#4A181B>{</font>1+<font color=#4A181B>$</font>yColumnCount<font color=#4A181B>}]</font>) doesn't match the number of points of x-axis data (column <font color=#4A181B>$</font>yColumnCount)&quot;</font>
        }
        <b><font color=#923B23>incr</font></b> yColumnCount
    }
    <i><font color=#4b5d50># fill output structure with values</font></i>
    <b><font color=#923B23>if</font></b> {([<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> names]==1)} {
            <b><font color=#923B23>set</font></b> headerString {}
        <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>llength</font></b> <font color=#4A181B>$columnNames</font>] != [<b><font color=#923B23>expr</font></b> {<font color=#4A181B>$dataNum</font>}]} {
            <b><font color=#923B23>puts</font></b> stderr <font color=#035103>&quot;Column names count is not the same as count of data columns&quot;</font>
            <b><font color=#923B23>set</font></b> autoTitleStr <font color=#035103>&quot;&quot;</font>
        } <b><font color=#923B23>else</font></b> {
            <b><font color=#923B23>for</font></b> {<b><font color=#923B23>set</font></b> i 0} {<font color=#4A181B>$i</font>&lt;=<font color=#4A181B>$dataNum</font>} {<b><font color=#923B23>incr</font></b> i} {
                <b><font color=#923B23>set</font></b> headerString <font color=#035103>&quot;<font color=#4A181B>${</font>headerString<font color=#4A181B>}</font> <font color=#4A181B>{</font> <font color=#4A181B>}</font> <font color=#4A181B>[</font>lindex <font color=#4A181B>$</font>columnNames <font color=#4A181B>$</font>i<font color=#4A181B>]</font>&quot;</font>
            }
            <b><font color=#923B23>lappend</font></b> outList <font color=#4A181B>$headerString</font>
            <b><font color=#923B23>set</font></b> autoTitleStr <font color=#035103>&quot;set key autotitle columnheader&quot;</font>
        }
    }
    <b><font color=#923B23>set</font></b> numRow [tcl::mathfunc::max {<b><font color=#923B23>*</font></b>}<font color=#4A181B>$xLengths</font>]
    <b><font color=#923B23>for</font></b> {<b><font color=#923B23>set</font></b> i 0} {<font color=#4A181B>$i</font>&lt;<font color=#4A181B>$numRow</font>} {<b><font color=#923B23>incr</font></b> i} {
        <b><font color=#923B23>set</font></b> row {}
        <b><font color=#923B23>for</font></b> {<b><font color=#923B23>set</font></b> j 0} {<font color=#4A181B>$j</font>&lt;<font color=#4A181B>$dataNum</font>} {<b><font color=#923B23>incr</font></b> j} {
            <b><font color=#923B23>set</font></b> columns [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> columns]
            <b><font color=#923B23>set</font></b> xVal [<b><font color=#923B23>lindex</font></b> [<b><font color=#923B23>lindex</font></b> <font color=#4A181B>$columns</font> [<b><font color=#923B23>expr</font></b> {int(<font color=#4A181B>$j</font>*2)}]] <font color=#4A181B>$i</font>]
            <b><font color=#923B23>set</font></b> yVal [<b><font color=#923B23>lindex</font></b> [<b><font color=#923B23>lindex</font></b> <font color=#4A181B>$columns</font> [<b><font color=#923B23>expr</font></b> {int(<font color=#4A181B>$j</font>*2+1)}]] <font color=#4A181B>$i</font>]
            <b><font color=#923B23>if</font></b> {<font color=#4A181B>$xVal</font>=={}} {
                <b><font color=#923B23>lappend</font></b> row { } { }
            } <b><font color=#923B23>else</font></b> {
                <b><font color=#923B23>lappend</font></b> row <font color=#4A181B>$xVal</font> <font color=#4A181B>$yVal</font>
            }
        }
        <b><font color=#923B23>lappend</font></b> outList <font color=#4A181B>$row</font>
    }
    <i><font color=#4b5d50># save data to temporary file</font></i>
    <b><font color=#923B23>set</font></b> randId [<b><font color=#923B23>expr</font></b> {int(rand()*10000)}]
    <b><font color=#923B23>set</font></b> resFile [<b><font color=#923B23>open</font></b> tmpPlotId<font color=#4A181B>${randId}</font>.csv w+]
    <b><font color=#923B23>puts</font></b> <font color=#4A181B>$resFile</font> [::csv::joinlist <font color=#4A181B>$outList</font> <font color=#035103>&quot; &quot;</font>]
    <b><font color=#923B23>close</font></b> <font color=#4A181B>$resFile</font>
    <i><font color=#4b5d50># create command strings for gnuplot</font></i>
    <b><font color=#923B23>set</font></b> commandStr <font color=#035103>&quot;plot 'tmpPlotId<font color=#4A181B>${</font>randId<font color=#4A181B>}</font>.csv' using 1:2 with lines &quot;</font>
    <b><font color=#923B23>for</font></b> {<b><font color=#923B23>set</font></b> i 1} {<font color=#4A181B>$i</font>&lt;<font color=#4A181B>$dataNum</font>} {<b><font color=#923B23>incr</font></b> i} {
        <b><font color=#923B23>set</font></b> commandStr  <font color=#035103>&quot;<font color=#4A181B>${</font>commandStr<font color=#4A181B>}</font>, '' using <font color=#4A181B>[</font>expr <font color=#4A181B>{$</font>i*2+1<font color=#4A181B>}]</font>:<font color=#4A181B>[</font>expr <font color=#4A181B>{$</font>i*2+2<font color=#4A181B>}]</font> with lines &quot;</font>
    }
    <b><font color=#923B23>exec</font></b> gnuplot &lt;&lt; <font color=#035103>&quot;</font>
<font color=#035103>        set mouse</font>
<font color=#035103>        <font color=#4A181B>$</font>optcmdStr</font>
<font color=#035103>        <font color=#4A181B>$</font>autoTitleStr</font>
<font color=#035103>        <font color=#4A181B>$</font>xlabelStr</font>
<font color=#035103>        <font color=#4A181B>$</font>ylabelStr</font>
<font color=#035103>        <font color=#4A181B>$</font>xscaleStr</font>
<font color=#035103>        <font color=#4A181B>$</font>yscaleStr</font>
<font color=#035103>        <font color=#4A181B>$</font>gridStr</font>
<font color=#035103>        <font color=#4A181B>$</font>commandStr</font>
<font color=#035103>        pause mouse close</font>
<font color=#035103>    &quot;</font>
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> delete]==1} {
        <b><font color=#923B23>file</font></b> delete tmpPlotId<font color=#4A181B>${randId}</font>.csv
    }
}</pre></div>
</div><h3 class='ruffproc'><a name='::gnuplotutil::plotXYN'>plotXYN</a><span class='ns_scope'> [<a href="index-gnuplotutil.html#::gnuplotutil" title="::gnuplotutil" class='ruff_cmd'>::gnuplotutil</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='index.html'>Main</a>, <a href='index-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Creates input and command files to plot 2D graphs with the same x points, and send it to gnuplot.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>plotXYN</span> <span class='ruff_arg'>x ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><code>x</code></td><td>List that contains x-point for 2D graph.</td></tr>
<tr><td><code><font color=#463e11>-columns</font></code></td><td>Argument that provides the y data to plot, the number of columns is not restricted and must be provided at the end of command after all switches.</td></tr>
<tr><td><code><font color=#463e11>-delete</font></code></td><td>Boolean switch that enables deleting of temporary file after end of plotting, default off.</td></tr>
<tr><td><code><font color=#463e11>-grid</font></code></td><td>Boolean switch that enables display of grid, default off.</td></tr>
<tr><td><code><font color=#463e11>-names</font></code></td><td>Argument that enable setting the column names of provided data, value must be provided as list in the same order as data columns provided, must have the length 1+number of y data colums.</td></tr>
<tr><td><code><font color=#463e11>-optcmd</font></code></td><td>Argument with optional string that may contain additional commands to gnuplot.</td></tr>
<tr><td><code><font color=#463e11>-xlabel</font></code></td><td>Argument to set x-axis label to display, string must be provided after it.</td></tr>
<tr><td><code><font color=#463e11>-xlog</font></code></td><td>Arg xlog boolean switch of log scale of x axis, default off.</td></tr>
<tr><td><code><font color=#463e11>-ylabel</font></code></td><td>Argument to set y-axis label to display, string must be provided after it.</td></tr>
<tr><td><code><font color=#463e11>-ylog</font></code></td><td>Boolean switch of log scale of y axis, default off.</td></tr>
</table>
<h5 class='ruff'>Description</h5>
<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>Example:
<b><font color=#923B23>set</font></b> x [<b><font color=#923B23>list</font></b> 0 1 2 3 4 5 6]
<b><font color=#923B23>set</font></b> y1 [<b><font color=#923B23>list</font></b> 0 1 4 9 16 25 36]
<b><font color=#923B23>set</font></b> y2 [<b><font color=#923B23>list</font></b> 0 1 8 27 64 125 216]
gnuplotutil::plotXYN <font color=#4A181B>$x</font> <font color=#463e11>-xlog</font> <font color=#463e11>-ylog</font> <font color=#463e11>-xlabel</font> <font color=#035103>&quot;x label&quot;</font> <font color=#463e11>-ylabel</font> <font color=#035103>&quot;y label&quot;</font> <font color=#463e11>-delete</font> <font color=#463e11>-grid</font> <font color=#463e11>-names</font> [<b><font color=#923B23>list</font></b> y1 y2] <font color=#463e11>-columns</font> <font color=#4A181B>$y1</font> <font color=#4A181B>$y2</font>
</pre>

</figure><h5 class='ruff'>Return value</h5><p class='ruff'>Returns gnuplot window with plotted data</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_2' href="javascript:toggleSource('2')">Show source</a></p>
<div id='2' class='ruff_dyn_src'><pre><b><font color=#ca14ca>proc</font></b> ::gnuplotutil::plotXYN {x args} {

    <i><font color=#4b5d50># Creates input and command files to plot 2D graphs with the same x points, and send it to gnuplot.</font></i>
    <i><font color=#4b5d50>#  x - List that contains x-point for 2D graph</font></i>
    <i><font color=#4b5d50>#  -xlog - arg xlog boolean switch of log scale of x axis, default off</font></i>
    <i><font color=#4b5d50>#  -ylog - boolean switch of log scale of y axis, default off</font></i>
    <i><font color=#4b5d50>#  -delete - boolean switch that enables deleting of temporary file after end of plotting, default off</font></i>
    <i><font color=#4b5d50>#  -xlabel - argument to set x-axis label to display, string must be provided after it</font></i>
    <i><font color=#4b5d50>#  -ylabel - argument to set y-axis label to display, string must be provided after it</font></i>
    <i><font color=#4b5d50>#  -optcmd - argument with optional string that may contain additional commands to gnuplot</font></i>
    <i><font color=#4b5d50>#  -grid - boolean switch that enables display of grid, default off</font></i>
    <i><font color=#4b5d50>#  -names - argument that enable setting the column names of provided data, value must be provided as list</font></i>
    <i><font color=#4b5d50>#    in the same order as data columns provided, must have the length 1+number of y data colums</font></i>
    <i><font color=#4b5d50>#  -columns - argument that provides the y data to plot, the number of columns is not restricted and must be provided</font></i>
    <i><font color=#4b5d50>#    at the end of command after all switches</font></i>
    <i><font color=#4b5d50># Returns gnuplot window with plotted data</font></i>
    <i><font color=#4b5d50># ```</font></i>
    <i><font color=#4b5d50># Example:</font></i>
    <i><font color=#4b5d50># set x [list 0 1 2 3 4 5 6]</font></i>
    <i><font color=#4b5d50># set y1 [list 0 1 4 9 16 25 36]</font></i>
    <i><font color=#4b5d50># set y2 [list 0 1 8 27 64 125 216]</font></i>
    <i><font color=#4b5d50># gnuplotutil::plotXYN $x -xlog -ylog -xlabel &quot;x label&quot; -ylabel &quot;y label&quot; -delete -grid -names [list y1 y2] -columns $y1 $y2</font></i>
    <i><font color=#4b5d50># ```</font></i>
    <b><font color=#923B23>set</font></b> arguments [argparse <font color=#463e11>-inline</font> {
        {<font color=#463e11>-xlog</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-ylog</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-delete</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-xlabel</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-ylabel</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-optcmd</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-grid</font> <font color=#463e11>-boolean</font>}
        {<font color=#463e11>-names</font> <font color=#463e11>-argument</font>}
        {<font color=#463e11>-columns</font> <font color=#463e11>-catchall</font>}
    }]
    <b><font color=#923B23>set</font></b> xscaleStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> yscaleStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> xlabelStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> ylabelStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> gridStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> autoTitleStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>set</font></b> optcmdStr <font color=#035103>&quot;&quot;</font>
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> xlog]==1} {
        <b><font color=#923B23>set</font></b> xscaleStr <font color=#035103>&quot;set logscale x&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> ylog]==1} {
        <b><font color=#923B23>set</font></b> yscaleStr <font color=#035103>&quot;set logscale y&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> grid]==1} {
        <b><font color=#923B23>set</font></b> gridStr <font color=#035103>&quot;set grid&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> names]==1} {
        <b><font color=#923B23>set</font></b> columnNames [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> names]
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> xlabel]==1} {
        <b><font color=#923B23>set</font></b> xlabelStr <font color=#035103>&quot;set xlabel '<font color=#4A181B>[</font>dict get <font color=#4A181B>$</font>arguments xlabel<font color=#4A181B>]</font>'&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> ylabel]==1} {
        <b><font color=#923B23>set</font></b> ylabelStr <font color=#035103>&quot;set ylabel '<font color=#4A181B>[</font>dict get <font color=#4A181B>$</font>arguments ylabel<font color=#4A181B>]</font>'&quot;</font>
    }
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> optcmd]==1} {
        <b><font color=#923B23>set</font></b> optcmdStr [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> optcmd]
    }
    <b><font color=#923B23>set</font></b> yColumnCount 0
    <b><font color=#923B23>foreach</font></b> val [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> columns] {
        <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>llength</font></b> <font color=#4A181B>$val</font>] != [<b><font color=#923B23>llength</font></b> <font color=#4A181B>$x</font>]} {
            <b><font color=#923B23>puts</font></b> stderr <font color=#035103>&quot;Number of points of y-axis data (column <font color=#4A181B>$</font>yColumnCount) doesn't match the number of points of x-axis data&quot;</font>
            <b><font color=#923B23>incr</font></b> yColumnCount
        }
    }
    <i><font color=#4b5d50># fill output structure with values</font></i>
    <b><font color=#923B23>set</font></b> numCol [<b><font color=#923B23>llength</font></b> [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> columns]]
    <b><font color=#923B23>if</font></b> {([<b><font color=#923B23>dict</font></b> exist <font color=#4A181B>$arguments</font> names]==1)} {
        <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>llength</font></b> <font color=#4A181B>$columnNames</font>] != [<b><font color=#923B23>expr</font></b> {<font color=#4A181B>$numCol</font>}]} {
            <b><font color=#923B23>puts</font></b> stderr <font color=#035103>&quot;Column names count is not the same as count of data columns&quot;</font>
            <b><font color=#923B23>set</font></b> autoTitleStr <font color=#035103>&quot;&quot;</font>
        } <b><font color=#923B23>else</font></b> {
            <b><font color=#923B23>lappend</font></b> outList <font color=#035103>&quot;<font color=#4A181B>{</font> <font color=#4A181B>}</font> <font color=#4A181B>$</font>columnNames&quot;</font>
            <b><font color=#923B23>set</font></b> autoTitleStr <font color=#035103>&quot;set key autotitle columnheader&quot;</font>
        }
    }
    <b><font color=#923B23>set</font></b> numRow [<b><font color=#923B23>llength</font></b> <font color=#4A181B>$x</font>]
    <b><font color=#923B23>for</font></b> {<b><font color=#923B23>set</font></b> i 0} {<font color=#4A181B>$i</font>&lt;<font color=#4A181B>$numRow</font>} {<b><font color=#923B23>incr</font></b> i} {
        <b><font color=#923B23>set</font></b> row [<b><font color=#923B23>lindex</font></b> <font color=#4A181B>$x</font> <font color=#4A181B>$i</font>]
        <b><font color=#923B23>foreach</font></b> val [<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> columns] {
            <b><font color=#923B23>lappend</font></b> row [<b><font color=#923B23>lindex</font></b> <font color=#4A181B>$val</font> <font color=#4A181B>$i</font>]
        }
        <b><font color=#923B23>lappend</font></b> outList <font color=#4A181B>$row</font>
    }
    <i><font color=#4b5d50># save data to temporary file</font></i>
    <b><font color=#923B23>set</font></b> randId [<b><font color=#923B23>expr</font></b> {int(rand()*10000)}]
    <b><font color=#923B23>set</font></b> resFile [<b><font color=#923B23>open</font></b> tmpPlotId<font color=#4A181B>${randId}</font>.csv w+]
    <b><font color=#923B23>puts</font></b> <font color=#4A181B>$resFile</font> [::csv::joinlist <font color=#4A181B>$outList</font> <font color=#035103>&quot; &quot;</font>]
    <b><font color=#923B23>close</font></b> <font color=#4A181B>$resFile</font>
    <i><font color=#4b5d50># create command strings for gnuplot</font></i>
    <b><font color=#923B23>set</font></b> commandStr <font color=#035103>&quot;plot 'tmpPlotId<font color=#4A181B>${</font>randId<font color=#4A181B>}</font>.csv' using 1:2 with lines &quot;</font>
    <b><font color=#923B23>for</font></b> {<b><font color=#923B23>set</font></b> i 1} {<font color=#4A181B>$i</font>&lt;<font color=#4A181B>$numCol</font>} {<b><font color=#923B23>incr</font></b> i} {
        <b><font color=#923B23>set</font></b> commandStr  <font color=#035103>&quot;<font color=#4A181B>${</font>commandStr<font color=#4A181B>}</font>, '' using 1:<font color=#4A181B>[</font>expr <font color=#4A181B>{$</font>i+2<font color=#4A181B>}]</font> with lines &quot;</font>
    }
    <b><font color=#923B23>exec</font></b> gnuplot &lt;&lt; <font color=#035103>&quot;</font>
<font color=#035103>        set mouse</font>
<font color=#035103>        <font color=#4A181B>$</font>optcmdStr</font>
<font color=#035103>        <font color=#4A181B>$</font>autoTitleStr</font>
<font color=#035103>        <font color=#4A181B>$</font>xlabelStr</font>
<font color=#035103>        <font color=#4A181B>$</font>ylabelStr</font>
<font color=#035103>        <font color=#4A181B>$</font>xscaleStr</font>
<font color=#035103>        <font color=#4A181B>$</font>yscaleStr</font>
<font color=#035103>        <font color=#4A181B>$</font>gridStr</font>
<font color=#035103>        <font color=#4A181B>$</font>commandStr</font>
<font color=#035103>        pause mouse close</font>
<font color=#035103>    &quot;</font>
    <b><font color=#923B23>if</font></b> {[<b><font color=#923B23>dict</font></b> get <font color=#4A181B>$arguments</font> delete]==1} {
        <b><font color=#923B23>file</font></b> delete tmpPlotId<font color=#4A181B>${randId}</font>.csv
    }
}</pre></div>
</div></main><nav class='ruff-nav'><ul ><li class='ruff-toc1'><a style='padding-top:2px;' href='index.html'>Start page</a></li>
<li class='ruff-toc1'><a href='index-docindex.html' accesskey='i'>Index</a></li>
<hr>
<li class='ruff-toc1'><a class='ruff-highlight' href='index-gnuplotutil.html'>gnuplotutil</a></li>
<li class='ruff-toc1'><a href='index-mathutil.html'>mathutil</a></li>
<li class='ruff-toc1'><a href='index-rfutil.html'>rfutil</a></li>
<li class='ruff-toc1'><a href='index-touchstoneutil.html'>touchstoneutil</a></li>
<hr><li class='ruff-toc2'><a href='#::gnuplotutil-Commands'>Commands</a></li><li class='ruff-toc3 ruff-tip'><a href='index-gnuplotutil.html#::gnuplotutil::plotXNYN'>plotXNYN</a><span class='ruff-tiptext'><pre>&lt;span class='ruff_cmd'&gt;<b><font color=#923B23>plotXNYN</font></b>&lt;/span&gt; &lt;span class='ruff_arg'&gt;?args?&lt;/span&gt;</pre>Creates input and command files to plot 2D graphs with the individual x points, and send it to gnuplot.
</span></li><li class='ruff-toc3 ruff-tip'><a href='index-gnuplotutil.html#::gnuplotutil::plotXYN'>plotXYN</a><span class='ruff-tiptext'><pre>&lt;span class='ruff_cmd'&gt;<b><font color=#923B23>plotXYN</font></b>&lt;/span&gt; &lt;span class='ruff_arg'&gt;x ?args?&lt;/span&gt;</pre>Creates input and command files to plot 2D graphs with the same x points, and send it to gnuplot.
</span></li></ul></nav><footer class='ruff-layout-footer ruff-ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div><div>&copy; George Yashin</div></footer>
</div></body></html>
